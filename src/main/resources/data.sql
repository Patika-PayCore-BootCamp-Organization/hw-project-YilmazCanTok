DROP TABLE IF NOT EXISTS dormitory;
DROP TABLE IF NOT EXISTS block;
DROP TABLE IF NOT EXISTS university;
DROP TABLE IF NOT EXISTS faculty;
DROP TABLE IF NOT EXISTS student;
DROP TABLE IF NOT EXISTS residency;
CREATE TABLE dormitory (
    id INT GENERATED by DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    address VARCHAR(300) NOT NULL,
    block_number INT NOT NULL
);

CREATE TABLE block(
    dormitory_id INT,
    FOREIGN KEY(dormitory_id) REFERENCES dormitory(id),
    name VARCHAR(1) NOT NULL,
);

CREATE TABLE university(
    id INT GENERATED by DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);


CREATE TABLE faculty(
    id_of_faculty INT GENERATED by DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    university_id INT,
    FOREIGN KEY (university_id) REFERENCES university(id);
);

CREATE TABLE student(
    id DOUBLE AS IDENTITY PRIMARY KEY,
    name VARCHAR(40) NOT NULL,
    surname VARCHAR(20) NOT NULL,
    age INT,
    profession VARCHAR(80) NOT NULL,
    schoolStatus INT NOT NULL,
    faculty VARCHAR (50) NOT NULL,
    facultyId INT NOT NULL,
    FOREIGN KEY(facultyId) REFERENCES faculty(id_of_faculty),
    phone VARCHAR(14) NOT NULL,
    email VARCHAR(50) UNIQUE NOT NULL,
    dormitory_starts DATE NOT NULL,
    dormitory_finishes DATE NOT NULL
);

CREATE TABLE residency(
    start_resident DATE,
    FOREIGN KEY(start_resident) REFERENCES student(dormitory_starts),
    finish_resident DATE,
    FOREIGN KEY(finish_resident) REFERENCES student(dormitory_finishes)
);

CREATE TABLE room(
  room_number INT AS IDENTITY PRIMARY KEY,
  number_of_students INT,
  block_name VARCHAR(1)  REFERENCES block(name),
  dormitory_name VARCHAR(50)  REFERENCES dormitory(name);
);

INSERT INTO dormitory(name, address, block_number) VALUES ('Alaaddin Yurdu', 'Konya/Selçuk Üniversitesi Kampüsü', '3'),
                                                          ('Ali Ulvi Yurdu', 'Bosna Hersek Mahallesi', '2'),
                                                          ('Mevlana Yurdu', 'Yazır Mahallesi', '2');

INSERT INTO block(dormitory_id, name) VALUES ('1','A'),
                                             ('1','B'),
                                             ('1','C'),
                                             ('1','D'),
                                             ('2','A'),
                                             ('2','B'),
                                             ('3','A'),
                                             ('3','B');

INSERT INTO university(name) VALUES ('Selcuk University');

INSERT INTO faculty(name) VALUES ('Engineering'),
                                 ('Medical'),
                                 ('Social Sceince'),
                                 ('Foreign Languages'),
                                 ('Sceince'),
                                 ('Literatur');

INSERT INTO student(id, name, surname, age, profession, schoolStatus, faculty, phone, email, dormitory_starts, dormitory_finishes) VALUES ('56985679156','Mahmut', 'Yirmi',20, 'Mechanical Engineering',2, 'Engineering', '+905869563578','mahmutyrm@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('84569756423','Murat', 'Açıkgöz', 19, 'Dentist',1, 'Medical', '+905869563578','muratacgz@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('14569862655','Yılmaz','Yıldırır', 23,'Electrical-Electoronical Engineering', 4, 'Engineering', '+905964235865','yilmazyildirir@gmail.com','2018-09-23', '2022-06-16'),
                                                                                                                                          ('35689412566','Ahmet', 'İrvasa', 19, 'English Literatur',1, 'Literatur', '+905741235486', 'irvasaa@gmail.com', '2022-09-20', '2026-06-14'),
                                                                                                                                          ('22665897456','Selim','Varolmuş', 23, 'English Teacher', 4, 'Foreign Languages', '+905054101115', 'selimvarolmus78@gmail.com','2018-09-23','2022-06-16'),
                                                                                                                                          ('45874952000', 'Mehmet', 'Kara', 21, 'History Teacher', 3, 'Social Sceince', '+905488480845', 'karaamehmet321@gmial.com','2019-09-21','2023-06-12'),
                                                                                                                                          ('68954823514', 'Sinan', 'Karaca', 24, 'Eye Doctor',5, 'Medical', '+905123456789','karacasinann@gmail.com', '2017-09-17', '2023-06-12')
                                                                                                                                          ('45632459652','Mustafa', 'Çakır', 20, 'English Teacher',2,'Foreign Languages','+905789456321','cakirmm@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('29264657876','Ahmet', 'Çakır', 20, 'Deutsch Teacher',2,'Foreign Languages','+905789456322','cakirraa@gmail.com','2021-09-25','2025-06-15')
                                                                                                                                          ('20256423895','Ahmet', 'Serbest', 19, 'Computer Engineering',1,'Engineering','+905478931254','ahmetsrbstt@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('64235968741','Yaşar', 'Beyaz', 24, 'Brain Doctor',5,'Medical','+905051011236','beyazzyyy@gmail.com','2017-09-21','2023-06-14'),
                                                                                                                                          ('78956876423','Batuhan', 'Kaya', 20, 'English Teacher',2,'Foreign Languages','+905789456321','batuhankaya81@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('10111213145','Muhammet', 'Yıldız', 22, 'Electrical Electronics Engineering',3,'Engineering','+905463215891','cakirraa@gmail.com','2019-09-25','2023-06-12'),
                                                                                                                                          ('10121316158','Emre', 'Mahmut', 20, 'Mine Engineering',2,'Engineering','+905789456321','emremahmutt@gmail.com','2019-09-25','2023-06-12'),
                                                                                                                                          ('66552233444','Ali', 'Açıksöz', 19, 'Franch Teacher',1,'Foreign Languages','+905556668877','aaciksozzz@gmail.com','2022-09-25','2026-06-15'),
                                                                                                                                          ('14510235689','Nurullah', 'Pekmez', 23, 'Philosophy',4,'Social Science','+905046543219','nurullahppzz@gmail.com','2018-09-23','2022-06-16'),
                                                                                                                                          ('74685923156','Fatih', 'Doğanlar', 23, 'Computer Engineering',4,'Engineering','+905228222222','doganlarfatih34@gmail.com','2018-09-23','2022-06-16'),
                                                                                                                                          ('45216853569','Can', 'Doğan', 20, 'Electrical Electronics Engineering',2,'Engineering','+905789456321','candogann1@gmail.com','2021-09-25','2025-06-15'),
                                                                                                                                          ('29231646856','Fırat', 'Sönmez', 22, 'English Teacher',3,'Foreign Languages','+905789456321','fsonmez@gmail.com','2019-09-21','2023-06-12'),


 INSERT INTO room(room_number,block_name,dormitory_name,number_of_students) VALUES ('100','A','Alaaddin Yurdu'),('101','A','Alaaddin Yurdu',4),('102','A','Alaaddin Yurdu',4),('103','A','Alaaddin Yurdu',4),('104','A','Alaaddin Yurdu',4),
                                                                                   ('200','A','Alaaddin Yurdu',4),('201','A','Alaaddin Yurdu',4),('202','A','Alaaddin Yurdu',4),('203','A','Alaaddin Yurdu',4),('204','A','Alaaddin Yurdu',4),
                                                                                   ('300','A','Alaaddin Yurdu',4),('301','A','Alaaddin Yurdu',4),('302','A','Alaaddin Yurdu',4),('303','A','Alaaddin Yurdu',4),('304','A','Alaaddin Yurdu',4),
                                                                                   ('100','B','Alaaddin Yurdu',4),('101','B','Alaaddin Yurdu',4),('102','B','Alaaddin Yurdu',4),('103','B','Alaaddin Yurdu',4),('104','B','Alaaddin Yurdu',4),
                                                                                   ('200','B','Alaaddin Yurdu',4),('201','B','Alaaddin Yurdu',4),('202','B','Alaaddin Yurdu',4),('203','B','Alaaddin Yurdu',4),('204','B','Alaaddin Yurdu',4),
                                                                                   ('300','B','Alaaddin Yurdu',4),('301','B','Alaaddin Yurdu',4),('302','B','Alaaddin Yurdu',4),('303','B','Alaaddin Yurdu',4),('304','B','Alaaddin Yurdu',4),
                                                                                   ('100','C','Alaaddin Yurdu',4),('101','C','Alaaddin Yurdu',4),('102','C','Alaaddin Yurdu',4),('103','C','Alaaddin Yurdu',4),('104','C','Alaaddin Yurdu',4),
                                                                                   ('200','C','Alaaddin Yurdu',4),('201','C','Alaaddin Yurdu',4),('202','C','Alaaddin Yurdu',4),('203','C','Alaaddin Yurdu',4),('204','C','Alaaddin Yurdu',4),
                                                                                   ('300','C','Alaaddin Yurdu',4),('301','C','Alaaddin Yurdu',4),('302','C','Alaaddin Yurdu',4),('303','C','Alaaddin Yurdu',4),('304','C','Alaaddin Yurdu',4),
                                                                                   ('100','A','Alaaddin Yurdu',4),('101','A','Alaaddin Yurdu',4),('102','A','Alaaddin Yurdu',4),('103','A','Alaaddin Yurdu',4),('104','A','Alaaddin Yurdu',4),
                                                                                   ('200','A','Alaaddin Yurdu',4),('201','A','Alaaddin Yurdu',4),('202','A','Alaaddin Yurdu',4),('203','A','Alaaddin Yurdu',4),('204','A','Alaaddin Yurdu',4),
                                                                                   ('100','B','Ali Ulvi Yurdu',4),('101','B','Ali Ulvi Yurdu',4),('102','B','Ali Ulvi Yurdu',4),('103','B','Ali Ulvi Yurdu',4),('104','B','Ali Ulvi Yurdu',4),
                                                                                   ('200','B','Ali Ulvi Yurdu',4),('201','B','Ali Ulvi Yurdu',4),('202','B','Ali Ulvi Yurdu',4),('203','B','Ali Ulvi Yurdu',4),('204','B','Ali Ulvi Yurdu',4),
                                                                                   ('100','A','Mevlana Yurdu',4),('101','A','Mevlana Yurdu',4),('102','A','Mevlana Yurdu',4),('103','A','Mevlana Yurdu',4),('104','A','Mevlana Yurdu',4),
                                                                                   ('200','A','Mevlana Yurdu',4),('201','A','Mevlana Yurdu',4),('202','A','Mevlana Yurdu',4),('203','A','Mevlana Yurdu',4),('204','A','Mevlana Yurdu',4),
                                                                                   ('100','B','Mevlana Yurdu',4),('101','B','Mevlana Yurdu',4),('102','B','Mevlana Yurdu',4),('103','B','Mevlana Yurdu',4),('104','B','Mevlana Yurdu',4),
                                                                                   ('200','B','Mevlana Yurdu',4),('201','B','Mevlana Yurdu',4),('202','B','Mevlana Yurdu',4),('203','B','Mevlana Yurdu',4),('204','B','Mevlana Yurdu',4);
